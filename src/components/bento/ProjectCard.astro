---
interface Props {
  title: string;
  description: string;
  tags: string[];
  href: string;
  icon?: string;
  color?: string;
  class?: string;
}

const { title, description, tags, href, icon = "code", color = "#a78bfa", class: className } = Astro.props;
---

<a href={href} target="_blank" class={`bento-card project-card ${className}`}>
  <zen-spotlight-card spotlight-color="rgba(255, 255, 255, 0.1)" border>
    <div class="content">
      <!-- Visual Header / Cover -->
      <div class="cover" style={`background: linear-gradient(135deg, ${color}30, transparent); border-bottom: 1px solid ${color}20;`}>
        <div class="icon-box" style={`background: ${color}20; color: ${color}; border: 1px solid ${color}40;`}>
          <zen-icon name={icon} size="24px"></zen-icon>
        </div>
      </div>

      <div class="details">
        <zen-text variant="h4" style="font-size: 1.25rem;">{title}</zen-text>
        <p class="description">{description}</p>
      </div>

      <div class="tags">
        {tags.slice(0, 3).map(tag => (
          <span class="mini-tag">{tag}</span>
        ))}
      </div>

      <!-- Arrow icon acting as overlay/cta -->
      <div class="arrow-overlay">
        <zen-icon name="arrow-up-right" size="20px"></zen-icon>
      </div>
    </div>
  </zen-spotlight-card>
</a>

<style>
  .project-card {
    display: block;
    text-decoration: none;
    color: inherit;
    position: relative;
    overflow: hidden;
  }

  zen-spotlight-card { height: 100%; display: block; }

  .content {
    height: 100%;
    display: flex;
    flex-direction: column;
    /* No padding on content, so cover hits edges */
  }

  .cover {
    height: 100px;
    width: 100%;
    display: flex;
    align-items: flex-end;
    padding: 1.5rem;
    position: relative;
  }

  .icon-box {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    transform: translateY(50%); /* Half overlap */
    position: relative;
    z-index: 2;
  }

  .details {
    padding: 1.5rem;
    padding-top: 1.5rem; /* space for overlapping icon */
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .description {
    font-size: 0.9rem;
    line-height: 1.5;
    opacity: 0.7;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .tags {
    padding: 0 1.5rem 1.5rem;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .mini-tag {
    font-size: 0.75rem;
    color: var(--zen-text-2);
    padding: 0.2rem 0.6rem;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 100px;
  }

  .arrow-overlay {
    position: absolute;
    top: 1rem;
    right: 1rem;
    width: 36px;
    height: 36px;
    background: rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    opacity: 0;
    transform: translate(-5px, 5px);
    transition: all 0.2s ease;
  }

  .project-card:hover .arrow-overlay {
    opacity: 1;
    transform: translate(0, 0);
  }
</style>
